{% extends 'base.html.twig' %}

{% from 'layouts/infinite_scroll.html.twig' import InfiniteScroll_render %}

{% block title %}{{ title }}{% endblock %}

{% block body %}

<h1 class="ui header center aligned">
	{{ title }} <span class="ui label">{{ pagination.getTotalItemCount }}</span>
</h1>

<div class="ui divided items pagination-feed">
	{% for achiev in pagination %}

	{% set completer = achiev.completed|round(2, 'floor') %}
	{% set url_achiev = url('achiev', {id: achiev.aId}) %}
	{% set img_achiev = gravatar(achiev.aId)~'&d=identicon' %}

	<div class="link item pagination-item">
		<div class="ui tiny image">
			<img src="{{ img_achiev }} ">
		</div>
		<div class="content">
			<a class="header" href="{{ url_achiev }}">{{ achiev.name }}</a>
			<div class="description">
				{{ achiev.desc }}
			</div>
			<br>
			<div class="ui indicating demo progress active" data-percent="{{ completer }}">
				<div class="bar" style="transition-duration: 300ms; width: {{ completer }}%;"></div>
				<div class="label">{{ completer }}% Done</div>
			</div>
		</div>
	</div>
	{% endfor %}
</div>

<div class="navigation">
    {{ knp_pagination_render(pagination) }}
</div>

{{ InfiniteScroll_render() }}

{% endblock %}
