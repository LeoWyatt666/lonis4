{% set route = app.request.attributes.get('_route') %}
{% set route_params = app.request.attributes.get('_route_params') %}
{% set params = route_params|merge(app.request.query.all) %}

<div class="ui">
{% for locale in locales if locale != app.request.locale %}

    <a href="{{ path(route, params|merge({ _locale: locale })) }}" 
            class="ui mini circular inverted basic button">
        &nbsp;&nbsp;<i class="flag {{ locale }}" title="{{ locale }}"></i>
    </a>

{% endfor %}
</div>